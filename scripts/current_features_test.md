# 当前功能测试清单

## 测试环境准备

1. **启动后端服务**
   ```bash
   cd backend
   python run.py
   # 或
   make start-backend
   ```
   确认后端运行在：`http://localhost:8000`

2. **启动前端服务**
   ```bash
   cd frontend
   npm run dev
   # 或
   make start-frontend
   ```
   确认前端运行在：`http://localhost:5173`

3. **测试账号**
   - 开发人员：`dev001` / `password123`
   - 项目经理：`pm001` / `password123`
   - 开发组长：`lead001` / `password123`
   - 系统管理员：`admin` / `password123`

---

## 功能测试清单

### ✅ 1. 用户认证系统

#### 1.1 登录功能
- [ ] 使用 `dev001` / `password123` 登录
- [ ] 验证登录成功后跳转到首页
- [ ] 验证页面显示用户名和角色信息
- [ ] 测试错误的用户名/密码，验证错误提示

#### 1.2 注册功能
- [ ] 点击"还没有账号？立即注册"
- [ ] 填写注册信息（用户名、邮箱、密码）
- [ ] 验证注册成功后自动登录
- [ ] 测试重复用户名/邮箱，验证错误提示

#### 1.3 退出登录
- [ ] 点击用户下拉菜单
- [ ] 点击"退出登录"
- [ ] 验证跳转到登录页
- [ ] 验证token已清除

---

### ✅ 2. 任务管理系统

#### 2.1 任务列表
- [ ] 访问 `/tasks` 页面
- [ ] 验证面包屑导航显示：首页 / 任务管理
- [ ] 验证任务列表正常显示
- [ ] 验证分页功能正常

#### 2.2 任务筛选
- [ ] 按状态筛选（草稿、已发布、已认领等）
- [ ] 按项目ID筛选
- [ ] 按创建者ID筛选
- [ ] 按认领者ID筛选
- [ ] 关键词搜索（标题、描述）
- [ ] 点击"重置"按钮，验证筛选条件清空

#### 2.3 创建任务（项目经理）
- [ ] 使用 `pm001` 登录
- [ ] 点击"+创建任务"按钮
- [ ] 填写任务信息（标题、描述、拟投入人天等）
- [ ] 提交创建
- [ ] 验证任务创建成功，状态为"草稿"

#### 2.4 发布任务（项目经理）
- [ ] 找到草稿状态的任务
- [ ] 点击"查看"进入任务详情
- [ ] 点击"发布"按钮
- [ ] 验证任务状态变为"已发布"

#### 2.5 认领任务（开发人员）
- [ ] 使用 `dev001` 登录
- [ ] 找到"已发布"状态的任务
- [ ] 点击"认领"按钮
- [ ] 验证任务状态变为"已认领"
- [ ] 验证任务分配给自己

#### 2.6 提交任务（开发人员）
- [ ] 找到"已认领"或"进行中"状态的任务
- [ ] 点击"提交"按钮
- [ ] 填写实际投入人天（如：5.0）
- [ ] 提交
- [ ] 验证任务状态变为"已提交"

#### 2.7 确认任务（项目经理）
- [ ] 使用 `pm001` 登录
- [ ] 找到"已提交"状态的任务
- [ ] 点击"确认"按钮
- [ ] 验证任务状态变为"已确认"
- [ ] **重要**：验证工作量统计是否自动更新（见工作量统计测试）

#### 2.8 任务详情页
- [ ] 点击任务列表中的"查看"按钮
- [ ] 验证面包屑导航：首页 / 任务管理 / 任务详情
- [ ] 验证任务详情完整显示
- [ ] 验证操作按钮根据任务状态和用户角色正确显示

---

### ✅ 3. 个人档案管理

#### 3.1 访问个人档案
- [ ] 使用 `dev001` 登录
- [ ] 从首页点击"个人档案"按钮
- [ ] 或访问 `/profile` 页面
- [ ] 验证面包屑导航：首页 / 个人档案

#### 3.2 个人信息编辑
- [ ] 在"个人信息"标签页
- [ ] 修改姓名
- [ ] 修改状态标签（如：🚀火力全开）
- [ ] 点击"保存"
- [ ] 验证保存成功

#### 3.3 技能管理
- [ ] 切换到"技能管理"标签页
- [ ] 点击"添加技能"按钮
- [ ] 填写技能名称和熟练度（熟悉/熟练/精通）
- [ ] 保存
- [ ] 验证技能添加成功
- [ ] 测试编辑技能
- [ ] 测试删除技能
- [ ] 验证同一技能不能重复添加

#### 3.4 业务履历管理
- [ ] 切换到"业务履历"标签页
- [ ] 点击"添加履历"按钮
- [ ] 填写项目、模块、角色、投入人天、贡献描述
- [ ] 保存
- [ ] 验证履历添加成功
- [ ] 测试编辑履历
- [ ] 测试删除履历

#### 3.5 序列管理
- [ ] 切换到"序列管理"标签页
- [ ] 点击"添加序列"按钮
- [ ] 填写序列等级（如：高级开发）和单价（如：2500）
- [ ] 保存
- [ ] 验证序列添加成功
- [ ] 测试编辑序列
- [ ] 测试删除序列

---

### ✅ 4. 工作量统计

#### 4.1 访问工作量统计
- [ ] 使用 `dev001` 登录
- [ ] 从首页点击"工作量统计"按钮
- [ ] 或访问 `/workload` 页面
- [ ] 验证面包屑导航：首页 / 工作量统计

#### 4.2 查看统计列表
- [ ] 验证统计列表正常显示
- [ ] 验证汇总信息显示（总投入人天、参与项目数、统计周期）

#### 4.3 筛选功能
- [ ] 按项目ID筛选
- [ ] 按时间范围筛选（开始日期、结束日期）
- [ ] 点击"查询"按钮
- [ ] 点击"重置"按钮

#### 4.4 工作量统计自动更新测试（重要）
- [ ] **准备**：确保有一个"已提交"状态的任务，且有实际投入人天
- [ ] 使用 `pm001` 登录
- [ ] 确认该任务（任务状态变为"已确认"）
- [ ] 使用 `dev001` 登录
- [ ] 访问工作量统计页面
- [ ] **验证**：统计中应该增加该任务的实际投入人天数
- [ ] **验证**：统计记录应包含正确的项目ID和统计周期

#### 4.5 分页功能
- [ ] 验证分页控件正常显示
- [ ] 测试切换每页显示数量
- [ ] 测试翻页功能

---

### ✅ 5. 导航和用户体验

#### 5.1 面包屑导航
- [ ] 访问任务管理页面，验证面包屑：首页 / 任务管理
- [ ] 访问任务详情页面，验证面包屑：首页 / 任务管理 / 任务详情
- [ ] 访问个人档案页面，验证面包屑：首页 / 个人档案
- [ ] 访问工作量统计页面，验证面包屑：首页 / 工作量统计
- [ ] 点击面包屑中的"首页"，验证跳转到首页
- [ ] 点击面包屑中的"任务管理"，验证跳转到任务列表

#### 5.2 首页导航
- [ ] 访问首页
- [ ] 验证显示用户信息
- [ ] 验证显示快捷操作按钮（任务管理、个人档案、工作量统计）
- [ ] 点击各个快捷按钮，验证跳转正确

#### 5.3 路由守卫
- [ ] 未登录状态下访问 `/tasks`，验证跳转到登录页
- [ ] 登录后访问 `/login`，验证跳转到首页
- [ ] 登录后访问需要认证的页面，验证正常访问

---

### ✅ 6. 权限控制

#### 6.1 开发人员权限
- [ ] 使用 `dev001` 登录
- [ ] 验证可以查看自己的个人档案
- [ ] 验证可以查看自己的工作量统计
- [ ] 验证可以认领任务
- [ ] 验证可以提交任务
- [ ] 验证**不能**创建任务（除非是项目经理）
- [ ] 验证**不能**确认任务（除非是项目经理）

#### 6.2 项目经理权限
- [ ] 使用 `pm001` 登录
- [ ] 验证可以创建任务
- [ ] 验证可以发布任务
- [ ] 验证可以确认任务
- [ ] 验证可以查看自己项目的统计

---

## 自动化测试脚本

### 测试工作量统计功能
```bash
cd /Users/wangwenhao/Documents/work/code.nosync/DevTeamResourceManager
python scripts/test_workload_statistics.py
```

### 检查任务状态（SQL）
```bash
mysql -h 10.254.68.77 -u root -p123456 devteam_manager < scripts/check_task_status.sql
```

---

## 常见问题排查

### 问题1：登录失败
- [ ] 检查用户名和密码是否正确（默认：`password123`）
- [ ] 检查后端服务是否正常运行
- [ ] 检查数据库连接是否正常
- [ ] 查看后端日志是否有错误

### 问题2：API请求失败（404）
- [ ] 检查后端路由是否正确注册
- [ ] 检查API路径是否正确
- [ ] 检查后端服务是否重启（修改路由后需要重启）

### 问题3：工作量统计没有更新
- [ ] 确认任务有 `actual_man_days`（实际投入人天）
- [ ] 确认任务有 `assignee_id`（认领人）
- [ ] 确认任务有 `project_id`（项目ID）
- [ ] 查看后端日志是否有错误
- [ ] 运行测试脚本验证：`python scripts/test_workload_statistics.py`

### 问题4：面包屑导航不显示
- [ ] 检查组件是否正确导入
- [ ] 检查路由名称是否正确
- [ ] 查看浏览器控制台是否有错误

---

## 测试结果记录

### 测试日期：___________

### 测试人员：___________

### 测试结果：

| 功能模块 | 测试项 | 状态 | 备注 |
|---------|--------|------|------|
| 用户认证 | 登录 | ⬜ 通过 ⬜ 失败 | |
| 用户认证 | 注册 | ⬜ 通过 ⬜ 失败 | |
| 任务管理 | 创建任务 | ⬜ 通过 ⬜ 失败 | |
| 任务管理 | 认领任务 | ⬜ 通过 ⬜ 失败 | |
| 任务管理 | 提交任务 | ⬜ 通过 ⬜ 失败 | |
| 任务管理 | 确认任务 | ⬜ 通过 ⬜ 失败 | |
| 个人档案 | 技能管理 | ⬜ 通过 ⬜ 失败 | |
| 个人档案 | 履历管理 | ⬜ 通过 ⬜ 失败 | |
| 个人档案 | 序列管理 | ⬜ 通过 ⬜ 失败 | |
| 工作量统计 | 查看统计 | ⬜ 通过 ⬜ 失败 | |
| 工作量统计 | 自动更新 | ⬜ 通过 ⬜ 失败 | |
| 导航 | 面包屑 | ⬜ 通过 ⬜ 失败 | |
| 导航 | 路由守卫 | ⬜ 通过 ⬜ 失败 | |

### 发现的问题：

1. 
2. 
3. 

### 建议改进：

1. 
2. 
3. 

---

**测试完成后，请将结果反馈给开发团队。**
