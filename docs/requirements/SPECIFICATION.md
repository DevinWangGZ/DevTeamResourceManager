# DevTeam Manager 需求规格说明书

> **文档版本**：v1.0 | **更新日期**：2024-05 | **负责人**：项目组

## 目录
- [项目概述](#项目概述)
- [项目愿景](#项目愿景)
- [用户角色](#用户角色)
- [核心功能需求](#核心功能需求)
- [业务流程](#业务流程)
- [非功能性需求](#非功能性需求)
- [需求优先级](#需求优先级)

---

## 项目概述

### 项目名称
DevTeam Manager（开发人员管理工具）

### 项目定位
一个**极简、透明、自助**的内部开发者资源管理与协作平台。

### 核心目标
解决团队资源匹配、任务分发与工作量量化等核心痛点。

---

## 项目愿景

打造一个**极简、透明、自助**的内部开发者资源管理与协作平台，通过以下方式解决核心痛点：

1. **资源匹配**：基于技能和负荷，快速匹配任务与开发者
2. **任务分发**：透明化的任务发布与认领机制
3. **工作量量化**：基于"投入人天"的客观数据统计

---

## 用户角色

### 1. 开发人员
**职责**：
- 维护个人档案（技能、履历）
- 认领任务
- 记录工作（提交任务，填写实际投入人天）
- 查看个人数据（负荷、绩效）

**核心页面**：
- 个人工作台
- 任务集市
- 负荷管理
- 技能档案
- 业务履历
- 我的绩效

### 2. 项目经理/组长
**职责**：
- 发布任务
- 确认工作量
- 组建团队
- 查看团队数据

**核心页面**：
- 管理仪表盘
- 人员信息中心
- 任务发布与管理
- 负荷可视化
- 团队能力洞察
- 绩效数据管理

### 3. 系统管理员
**职责**：
- 管理用户
- 配置基础数据
- 系统维护

**核心页面**：
- 系统管理

---

## 核心功能需求

### 1. 用户认证与角色管理（P0）

#### 1.1 用户注册与登录
- **功能描述**：用户通过账号密码登录系统
- **验收标准**：
  - 支持邮箱/用户名登录
  - 密码加密存储
  - JWT Token认证
  - Token过期自动刷新

#### 1.2 角色权限管理
- **功能描述**：系统支持三种角色（开发人员、项目经理、系统管理员）
- **验收标准**：
  - 角色权限清晰划分
  - 基于角色的访问控制（RBAC）
  - 权限变更可追溯

### 2. 任务系统（P0）

#### 2.1 任务发布
- **功能描述**：项目经理创建并发布任务
- **关键字段**：
  - 任务标题、描述
  - 拟投入人天（PM填写）
  - 所需技能
  - 截止时间
- **验收标准**：
  - 任务创建后状态为"草稿"
  - 发布后状态变为"已发布"
  - 已发布任务可在任务集市查看

#### 2.2 任务认领
- **功能描述**：开发人员认领已发布的任务
- **验收标准**：
  - 只有"已发布"状态的任务可认领
  - 认领后状态变为"已认领"
  - 任务分配给认领者
  - 认领时不需要评估，直接认领

#### 2.2.1 任务派发与评估
- **功能描述**：项目经理派发任务给指定开发人员，开发人员评估后选择接受或拒绝
- **关键流程**：
  1. 项目经理派发任务给指定开发人员
  2. 任务状态变为"待评估"
  3. 开发人员查看任务详情并评估
  4. 开发人员选择"接受"或"拒绝"
  5. 接受后状态变为"已认领"，拒绝后状态变为"已发布"
- **验收标准**：
  - 派发任务与主动认领任务流程不同
  - 派发任务需要开发人员评估确认
  - 接受后任务分配给开发人员
  - 拒绝后任务可被其他开发人员认领

#### 2.3 任务提交
- **功能描述**：开发人员提交已完成的任务
- **关键字段**：
  - 实际投入人天（开发者填写）
- **验收标准**：
  - 提交后状态变为"已提交"
  - 必须填写实际投入人天
  - 提交后任务不可修改（需特殊权限）

#### 2.4 任务确认
- **功能描述**：项目经理确认任务完成
- **验收标准**：
  - 只有"已提交"状态的任务可确认
  - 确认后状态变为"已确认"
  - 确认后"实际投入人天"自动汇入开发者工作量统计
  - 确认操作非审批流程，直接生效

#### 2.5 任务状态流转
- **状态流**：`草稿 -> 已发布 -> 已认领 -> 进行中 -> 已提交 -> 已确认 -> 已归档`
- **派发流程状态流**：`草稿 -> 已发布 -> 待评估 -> 已认领/已发布（拒绝后）`
- **验收标准**：
  - 状态流转有明确的规则和校验
  - 不支持非法状态流转
  - 状态变更记录可追溯

#### 2.6 任务排期
- **功能描述**：任务认领后自动按认领人天顺序排期
- **排期规则**：
  - 按认领时间顺序排期
  - 基于任务的"拟投入人天"计算排期
  - 排期计算自动排除节假日（周末、法定节假日）
  - 只计算工作日
- **验收标准**：
  - 任务认领后自动生成排期
  - 排期结果在个人工作台显示
  - 显示预计开始时间和结束时间
  - 排期准确，排除节假日

#### 2.7 任务置顶
- **功能描述**：开发人员可以将紧急任务置顶，优先处理
- **置顶规则**：
  - 开发人员可以置顶任意已认领的任务
  - 置顶后任务排在最前面，优先处理
  - 如果当前有正在处理的B任务，置顶A任务后：
    - A任务排在最前面
    - B任务按照未完成的人天向后自动延期
    - 延期计算排除节假日
    - B任务及其后续任务自动调整排期
- **验收标准**：
  - 置顶操作简单，一键完成
  - 可以取消置顶，恢复原排期
  - 置顶状态清晰标识
  - 排期自动调整准确

### 3. 人员档案管理（P0）

#### 3.1 技能管理
- **功能描述**：开发人员自维护技能列表
- **数据格式**：`{技能名, 熟练度:熟悉/熟练/精通}`
- **验收标准**：
  - 用户可随时添加/修改/删除技能
  - 无需审核，立即生效
  - 技能名支持自定义

#### 3.2 业务履历
- **功能描述**：开发人员自登记项目经历
- **数据格式**：`{项目, 模块, 角色, 贡献描述, 投入人天}`
- **验收标准**：
  - 用户可随时添加/修改/删除履历
  - 可关联任务系统，自动同步
  - 投入人天支持小数（如0.5天）

#### 3.3 状态标签
- **功能描述**：开发人员设置趣味化情绪标签
- **示例**：🚀"火力全开"、😴"休息中"
- **验收标准**：
  - 可选功能，不影响业务逻辑
  - 支持自定义标签

#### 3.4 序列管理
- **功能描述**：开发人员自维护序列等级和单价
- **数据格式**：`{序列等级, 单价(元/人天)}`
- **示例**：
  - 初级开发：1500元/人天
  - 中级开发：2000元/人天
  - 高级开发：2500元/人天
- **验收标准**：
  - 用户可以设置自己的序列等级和对应单价
  - 可以修改序列等级和单价
  - 修改立即生效，用于产值计算
  - 序列信息在个人档案中清晰显示

### 4. 工作量统计（P0）

#### 4.1 工作量汇总
- **功能描述**：基于"实际投入人天"统计开发者工作量
- **数据来源**：任务确认后的"实际投入人天"
- **验收标准**：
  - 按项目/模块/时间维度统计
  - 数据准确，可追溯
  - 支持数据可视化

#### 4.2 负荷计算
- **功能描述**：基于已认领任务的"拟投入人天"计算负荷
- **计算维度**：按周/月统计
- **验收标准**：
  - 负荷状态可视化（红/黄/绿）
  - 负荷阈值：<80%绿色，80%-120%黄色，>120%红色

### 5. 任务集市（P1）

#### 5.1 任务浏览
- **功能描述**：开发人员浏览可认领的任务
- **验收标准**：
  - 支持分页、筛选、搜索
  - 显示任务关键信息（标题、描述、拟投入人天、所需技能）
  - 列表页加载时间 < 2秒

#### 5.2 任务筛选
- **功能描述**：按状态、技能、项目等条件筛选任务
- **验收标准**：
  - 筛选条件清晰
  - 筛选结果实时更新
  - 支持多条件组合筛选

### 6. 负荷可视化（P1）

#### 6.1 个人负荷视图
- **功能描述**：开发人员查看个人负荷情况
- **验收标准**：
  - 时间轴视图显示负荷分布
  - 负荷状态清晰标识（红/黄/绿）
  - 支持按周/月切换视图

#### 6.2 团队负荷视图
- **功能描述**：项目经理查看团队负荷情况
- **验收标准**：
  - 团队负荷看板
  - 负荷预警（过载提醒）
  - 支持按人员/项目筛选

### 7. 管理仪表盘（P1）

#### 7.1 团队指标
- **功能描述**：展示团队关键指标
- **指标包括**：
  - 团队总工作量
  - 任务完成率
  - 平均投入人天
  - 负荷分布
- **验收标准**：
  - 数据可视化清晰
  - 支持时间范围选择
  - 数据实时更新

#### 7.2 待办提醒
- **功能描述**：提醒项目经理待处理事项
- **提醒内容**：
  - 待确认任务数量
  - 过载人员提醒
  - 即将到期任务
- **验收标准**：
  - 提醒及时、准确
  - 支持一键处理

### 8. 绩效数据可视化（P1）

#### 8.1 工作量趋势
- **功能描述**：展示开发者工作量趋势
- **验收标准**：
  - 图表清晰易读
  - 支持多维度对比
  - 数据可导出

### 9. 项目产值管理（P1）

#### 9.1 预计产值管理
- **功能描述**：项目经理管理项目的预计产值
- **关键字段**：
  - 预计产值（项目立项时填写）
- **验收标准**：
  - 可以在项目立项时填写预计产值
  - 可以修改预计产值（需记录修改历史）
  - 预计产值在项目详情中清晰显示

#### 9.2 任务产值计算
- **功能描述**：自动计算项目的任务产值
- **计算公式**：
  - **任务产值** = Σ(任务的实际投入人天 × 开发人员的序列单价)
  - 包含已完成和未完成的任务
  - **需要分配的产值** = Σ(已确认任务的实际投入人天 × 开发人员的序列单价)
- **验收标准**：
  - 任务产值自动计算，实时更新
  - 可以查看任务产值明细（按任务、按人员）
  - 可以查看需要分配的产值
  - 产值数据可视化清晰

#### 9.3 产值超支提醒
- **功能描述**：当任务产值超出预计产值时提醒项目经理
- **提醒规则**：
  - 当任务产值 > 预计产值时，系统自动提醒
  - 提醒信息包括：
    - 当前任务产值
    - 预计产值
    - 超出金额
    - 超出比例
- **提醒建议**：
  - 找业主补充合同
  - 找部门申请产值补贴
- **验收标准**：
  - 超支提醒及时、准确
  - 提醒信息清晰，包含建议措施
  - 支持查看产值明细

### 10. 项目任务执行视图（P1）

#### 10.1 任务执行总览
- **功能描述**：项目经理查看项目所有任务的执行状态
- **视图内容**：
  - 所有任务列表（按状态分组）
  - 任务详细信息（标题、描述、认领人、投入人天、状态等）
  - 任务时间线视图
  - 任务负荷分布
- **验收标准**：
  - 可以查看当前项目所有任务的执行状态
  - 可以按任务状态筛选（草稿、已发布、已认领、进行中、已提交、已确认、已归档）
  - 可以按项目、模块、人员等维度筛选
  - 视图清晰，便于总览全局

#### 10.2 任务时间线视图
- **功能描述**：以时间线方式展示任务执行情况
- **验收标准**：
  - 可以看到任务的时间线视图
  - 可以看到任务的预计开始时间和结束时间
  - 可以看到任务的完成进度
  - 时间线视图清晰易读

#### 10.3 任务负荷分布
- **功能描述**：展示项目任务的负荷分布情况
- **验收标准**：
  - 可以看到任务的负荷分布
  - 可以看到每个人员的负荷情况
  - 负荷状态清晰标识（红/黄/绿）
  - 支持按时间维度查看

---

## 业务流程

### 任务生命周期流程

```
1. PM创建任务（草稿）
   ↓
2. PM发布任务（已发布）
   ↓
3. 开发者认领任务（已认领）
   ↓
4. 开发者开始工作（进行中，可选）
   ↓
5. 开发者提交任务（已提交）
   - 填写实际投入人天
   ↓
6. PM确认任务（已确认）
   - 点击确认，非审批
   - 实际投入人天自动汇入统计
   ↓
7. 任务归档（已归档）
```

### 工作量统计流程

```
任务确认
   ↓
提取实际投入人天
   ↓
更新开发者工作量统计
   ↓
更新项目/模块统计
   ↓
更新负荷计算
```

---

## 非功能性需求

### 性能要求
- 列表页加载时间 < 2秒
- 关键操作响应 < 1秒
- 支持100+并发用户

### 安全性要求
- 接口权限校验必须实现
- 数据隔离：用户只能访问授权范围内的数据
- 防XSS注入：所有用户输入必须转义/验证
- 敏感操作记录操作日志

### 可维护性要求
- 代码模块化，关键业务逻辑有注释
- 使用统一的错误处理机制
- 日志记录关键操作和异常

### 可扩展性要求
- 核心状态流可插拔，便于后续扩展
- 预留扩展点，便于后续增加审批流等功能
- 使用配置化方式管理业务规则

---

## 需求优先级

### P0（核心功能，必须实现）
1. ✅ 用户认证与角色管理
2. ✅ 任务系统（发布、认领、提交、确认）
3. ✅ 人员档案管理（技能、履历）
4. ✅ 工作量统计（基于实际投入人天）

### P1（重要功能，优先实现）
1. ⏳ 负荷可视化（个人/团队）
2. ⏳ 任务集市（浏览、筛选、认领）
3. ⏳ 管理仪表盘（团队指标、待办提醒）
4. ⏳ 绩效数据可视化

### P2（增强功能，后续迭代）
1. 📋 智能匹配（基于需求的候选人推荐）
2. 📋 团队能力洞察（技能矩阵、人才梯队分析）
3. 📋 数据导出功能
4. 📋 消息通知系统

---

## 更新日志

| 版本 | 日期 | 更新内容 | 负责人 |
|------|------|----------|--------|
| v1.2 | 2024-05 | 新增开发人员序列管理、项目产值管理、任务执行视图功能需求 | 项目组 |
| v1.1 | 2024-05 | 新增任务派发评估、任务排期、任务置顶功能需求 | 项目组 |
| v1.0 | 2024-05 | 初始版本，制定需求规格 | 项目组 |

---

**文档维护**：本文档随项目发展持续更新，重大变更需团队评审。
